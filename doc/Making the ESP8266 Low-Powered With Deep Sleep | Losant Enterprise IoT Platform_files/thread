jsonp_1529079560808_12402({"objects":[{"id":408575515,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1490180280359,"deletedAt":0,"userName":"Sammie Mays","firstName":"Sammie Mays","lastName":"","userEmail":null,"comment":"This is very cool. I think i will employ this in my coming project. Thanks","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0001.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408869212,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1505235315867,"deletedAt":0,"userName":"Michael Monteith","firstName":"Michael Monteith","lastName":"","userEmail":null,"comment":"I like the information on the Deep Sleep function and connection.  I was going to use something similar for detecting when my mailbox is opened.  But I think I'll have to wire the hall sensor to the RST pin in order for it to wake up when the door is opened.    Thanks.","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0002.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408869220,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1505235940481,"deletedAt":0,"userName":"Taron Foxworth","firstName":"Taron Foxworth","lastName":"","userEmail":null,"comment":"That sounds like an awesome project!","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0002.0001.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408870360,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1505318899842,"deletedAt":0,"userName":"Michael Monteith","firstName":"Michael Monteith","lastName":"","userEmail":null,"comment":"Actually reading it's a lot simpler than I thought.   If you want timed wake you have to tie Reset to GPIO16 and use the timer to wake it up.  But for my purposes I just need to apply a low to the reset pin.  When it goes back high the system restarts.   I just have to see how my hall sensor will work.  It should work with it or a reed switch.\r\n\r\n To the author.  Not trying to hijack your post.  I love it.  This is just another way of using deep sleep and to wake the device up.","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0002.0001.0001.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408976937,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1509566214855,"deletedAt":0,"userName":"Baz Cooper","firstName":"Baz Cooper","lastName":"","userEmail":null,"comment":"Thanks, connecting Reset to GPIO16 did the trick to wake up on timer. \r\nStrange i could not find this answer elsewhere, took me an afternoon.\r\n\r\nConnecting GND with Reset will wake up the ESP8266 too. I build a mail detecting\r\nsystem. When the postman opens the mailbox, GND will connect to Reset, starting\r\nup the ESP requesting a secret webpage which send me an email that there is mail in the\r\nmailbox. Works now for almost a year on the same 3 1.5V batteries. In deep sleep only uses\r\n.05Å³A, batteries only went down from 4.5 to 3.4 in that period.","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0002.0001.0001.0001.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408871217,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1505391951990,"deletedAt":0,"userName":"Thomas Braun","firstName":"Thomas Braun","lastName":"","userEmail":null,"comment":"Nice idea, but not working with the NodeMCU board I'm using.\r\n\r\nAs soon as RST and D0 are connected and I power on, it does not start at all but continously resets (the small LED near the WLAN chip that that blinks when uploading the sketch just keeps flashing every 0.5 seconds)\r\n\r\nSeems as if the RST is permanently at LOW...\r\n\r\nNot sure what to do now?","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0003.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408871244,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1505393465721,"deletedAt":0,"userName":"Thomas Braun","firstName":"Thomas Braun","lastName":"","userEmail":null,"comment":"...as long as the board is connected via the USB port, it works.\r\n\r\nBut it doesn't when I use Batteries, so maybe this is related to insufficient power supply?\r\n\r\nI'm using 3 x 1.2 V rechargeable MiMh batteries which are connected to 3.3V and GND (which should be correct IMHO)\r\n\r\nThomas","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0003.0001.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408872415,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1505479015998,"deletedAt":0,"userName":"Thomas Braun","firstName":"Thomas Braun","lastName":"","userEmail":null,"comment":"...somehow it finally works, not 100% sure what was wrong.","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0003.0001.0001.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408873065,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1505524718705,"deletedAt":0,"userName":"Steve OBrien","firstName":"Steve OBrien","lastName":"","userEmail":null,"comment":"It might be worth warning people that adding the wire link from D0 - RST can causes comms errors when programming.\r\nI have a WeMos D1 mini that I program with the Arduino IDE, it normally uploads the code 100%.\r\nBut after using the deepsleep mode and adding the D0 - RST link, I started to get comms errors.\r\nThe fix is to remove the D0 - RST link while uploading, and the comms errors went away.","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0004.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408983817,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1510064249556,"deletedAt":0,"userName":"John Congerton","firstName":"John Congerton","lastName":"","userEmail":null,"comment":"Same thing on NodeMCU 1.0 - need to disconnect the jumper until the sketch is loaded","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0004.0001.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408887440,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1506297619070,"deletedAt":0,"userName":"Paolo Cinaglia","firstName":"Paolo Cinaglia","lastName":"","userEmail":null,"comment":"Hi, thanks for the post. I can put my huzzah esp8266 in deepsleep with no problem. I have also a question; if i want to use a RTC to define the time of deepsleep how i have to do? I have only to put my RTC in the system or i need some extra code? Thanks again","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0005.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408888645,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1506364309605,"deletedAt":0,"userName":"Michael Montieth","firstName":"Michael Montieth","lastName":"","userEmail":null,"comment":"Paolo,\r\n If you tie GPIO16 to Reset the RTC is what is triggering GPIO16 at a specific time.  You basically put in:\r\nESP.deepSleep(20e6); // 20e6 is 20 microseconds\r\nYou can see it in his code above in his original post.  \r\n\r\n During deep sleep the only thing running is the RTC.  Once it times out it awkens the system using GPIO16.    NOTE:Not all versions of the esp8266 have gpio16 and reset pins brought out for access.","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0005.0001.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408888759,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1506373604100,"deletedAt":0,"userName":"Paolo Cinaglia","firstName":"Paolo Cinaglia","lastName":"","userEmail":null,"comment":"I know Michael; I've bought an external RTC (PCF8523) and I'm asking if i can use it to regulate the deepsleep timer instead of the RTC of my esp8266. I think, and i'm pretty sure the PCF is more precise than esp8266's rtc. I'm wrong? \r\nI think I can just put my RTC in the sketch declaring it and than? I need anything else or i'm good? (probably i'm not good in this way, i know...)\r\n\r\nSorry for my poor english and thank you for your help","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0005.0001.0001.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408889389,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1506428722434,"deletedAt":0,"userName":"Michael Montieth","firstName":"Michael Montieth","lastName":"","userEmail":null,"comment":"Paolo,\r\n  I'm really surprised that the RTC of the esp8266 is so bad.   I couldn't find any exact specifications on it.  I only found some comments that it was bad.   The PCF8523 is more accurate but seems to not be a whole lot better according to this:\r\nhttps://www.adafruit.com/product/3295\r\n\r\n Sounds like if you need more accuracy you might have to go with one of the Dallas Semiconductor versions.    There are plenty of libraries for the Dallas Semiconductor chips.   The Adafruit link I gave above has a link in it to their libraries for the chip you have.  \r\n\r\n Most of the chips have an output that you can tie to the reset pin on the ESP8266 to bring reset low and back to high.  You might look to see if someone has already done this sort of thing.","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0006.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408889601,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1506439539998,"deletedAt":0,"userName":"Paolo Cinaglia","firstName":"Paolo Cinaglia","lastName":"","userEmail":null,"comment":"Michael, the only thing I know is when I set the deep sleep time in my sketch (1 hour, 3600 sec.) and than i run the sketch, deepsleep ends about 3 minutes earlyer. I use the method \"const int sleepTimeS = 3600;\" \"ESP.deepSleep(sleepTimeS * 1000000);\" \r\nI dont' think it's a method problem but a RTC's. Even with smaller amount of time i have problems with time","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0006.0001.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408889633,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1506441356357,"deletedAt":0,"userName":"Michael Monteith","firstName":"Michael Monteith","lastName":"","userEmail":null,"comment":"Paolo,\r\n I agree. That bad you need something.  I was reading where the oscillator they use for the RTC on the ESP8266 isn't that good.   Like seconds per hour, which would explain what you're seeing.  \r\n\r\n I got to thinking. I wonder if it's always off the same direction and same amount?  The reason I say that is you can adjust for that if it's consistently off.   It would save the extra hardware.    \r\n\r\n Best thing to do is try some options.  If it's off consistently in the same direction try compensating for it.   Otherwise try an external RTC like you have.","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0006.0001.0001.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408889664,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1506443625894,"deletedAt":0,"userName":"Paolo Cinaglia","firstName":"Paolo Cinaglia","lastName":"","userEmail":null,"comment":"Michael, I've already compensated (now I have like 3753 secs -i don't have the sketch with me now-) and i'm testing for now. In the future i will need the external RTC to make my datalogger print day and hour on an SD card; so i use to regulate deepsleep and datalogging both.\r\n\r\nThanks for all\r\n\r\nBest regards :)","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0007.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409002012,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1511669782475,"deletedAt":0,"userName":"Craig Larson","firstName":"Craig Larson","lastName":"","userEmail":null,"comment":"Paolo,\r\n\r\nI know this is late... but I have used a MCP7940 RTC  to wake up sleeping devices.  Those RTC's have a Multi Funciton Pin that will go low and could be used to drive an ESP8266 reset.   If I remember correctly you can set it to go off every minute or every hour, day, month...  Or, I think, you could also set a specific time for it to trigger.  Further... if I recall, you can set two triggers.   The nice thing about the dedicated RTC's is accuracy, and BCD retisters for easy retrieval of seconds, minutes, hours, month, or even which day of week.  Plus they are pretty low power devices too.  The datasheet is your friend, here, as usual.","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0007.0001.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408892537,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1506660508811,"deletedAt":0,"userName":"Jason Kell","firstName":"Jason Kell","lastName":"","userEmail":null,"comment":"Hi,\r\nThe info on the sleep current consumption is useful, but you don't really go through an analysis of how long it takes for the ESP8266 to wake up, connect to wifi, send data, and then go back to sleep.  What is the duration of this wake state?","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0008.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408893823,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1506765638194,"deletedAt":0,"userName":"Paolo Cinaglia","firstName":"Paolo Cinaglia","lastName":"","userEmail":null,"comment":"Hi Jason, \r\n i don't think the pourpose of this article was talk about the wake time, but present the possibility to put the ESP8266 in deep sleep to save energy. \r\nAnyway in my project i saw that the ESP went wake for a few seconds and it went sleep again after that (in this seconds it connects and send data of temperature, humidity and lux to server). For power consumption i can't say you nothing. I don't still have a multimeter so i can't check.","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0008.0001.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408897373,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1507113857278,"deletedAt":0,"userName":"UFUK VARLIK","firstName":"UFUK VARLIK","lastName":"","userEmail":null,"comment":"Hi,\r\nI just started writing programs. I am using the STM32F0 Discovery DK (STM32F051R8) and communicated with UART. I using KEIL IDE. I made a button-led application with a server control but, the module consumes 116mA (with Discovery). How can I use the Deep sleep mode of the Wifi module? Arduino has ESP.deepSleep() function in \"ESP8266WiFi.h\" file. How can I write a similar or same function c code in the KEIL IDE ?\r\nThanks for your valuable feedback :)","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0009.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408897417,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1507117623790,"deletedAt":0,"userName":"Michael Monteith","firstName":"Michael Monteith","lastName":"","userEmail":null,"comment":"UFUK,\r\n That is a totally different processor.  Unrelated to the ESP8266 or ESP32.  Even if it had some sort of deep sleep mode I doubt on those development boards you're going to get very low current usage.  Current is used by active circuits such as USB interface, voltage regulators, etc.  Anything that's basically active on the board at all times.   There is a group that discusses the type of micro at:\r\nhttp://www.stm32duino.com/index.php\r\n\r\nMichael","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0009.0001.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408903315,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1507649848788,"deletedAt":0,"userName":"Danny Ackerman","firstName":"Danny Ackerman","lastName":"","userEmail":null,"comment":"Hi Michael,\r\n\r\nI've been trying to understand the details related to the point you made for quite a while now.  I read all these tutorials about getting micro-amp consumption by putting an ESP8266 to sleep, yet every development board has USB and a Voltage Regulator, which means you're never going to get below let's say 8mA.  Unless you use a solo ESP8266 chip and power it directly.\r\n\r\nAm I missing something in all these tutorials?  Does using a LiPo maybe bypass the voltage regulator and therefore you can get to uA consumption?\r\n\r\nThanks!","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0009.0001.0001.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408902524,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1507589434838,"deletedAt":0,"userName":"destroyed lolo","firstName":"destroyed lolo","lastName":"","userEmail":null,"comment":"Hi,\r\n\r\nThanks for this very useful article and related comment that highlighted to me the RTC is not so Real Time :)\r\n\r\nJust to signal Losant link is broken (htts instead of https).\r\n\r\nLaurent","userUrl":"http://destroyedlolo.info","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0010.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408903362,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1507652801766,"deletedAt":0,"userName":"Michael Monteith","firstName":"Michael Monteith","lastName":"","userEmail":null,"comment":"Danny,\r\n From the schematics it would bypass the voltage regulator but powers everything else.  Which includes the usb chip.   I assume the voltage regulator would be the biggest drain as it's taking typical 5v from the usb cable coming in and regulating it down to 3.3v.   But I'm not sure how much the usb chip will draw.  You will just have to see.    Hope that helps. \r\n\r\nMichael","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0011.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408903368,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1507653036109,"deletedAt":0,"userName":"Danny Ackerman","firstName":"Danny Ackerman","lastName":"","userEmail":null,"comment":"Thanks!","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0011.0001.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408983822,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1510064407452,"deletedAt":0,"userName":"John Congerton","firstName":"John Congerton","lastName":"","userEmail":null,"comment":"My NodeMCU 1.0 appears to be entering and leaving deepsleep WITHOUT the D0:RST jumper. That is, without measuring power, I can't see any difference between the with and without setups - it reboots after the specified deepsleep time.","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0012.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408983830,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1510064976621,"deletedAt":0,"userName":"Michael Monteith","firstName":"Michael Monteith","lastName":"","userEmail":null,"comment":"John,\r\n As far as power difference you probably won't see much.  A NodeMCU has a usb interface IC and voltage regulator that draw significant amounts of current.   Deepsleep is more noticeable on standalone ESP devices without USB interface IC, leds, etc.  \r\n\r\nMichael","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0012.0001.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408983857,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1510066529796,"deletedAt":0,"userName":"destroyed lolo","firstName":"destroyed lolo","lastName":"","userEmail":null,"comment":"hi,\r\n\r\nMine, stamped NodeMCU v0.1 (yes, 0.1 !!), won't wakeup without the jumper.\r\n\r\nIn addition, I did following measurements :\r\n* normal processing (WiFi, DS18b20 acquisition, MQTT) : 60mA\r\n* MODEM_SLEEP : 4mA\r\n* LIGHT_SLEEP : &lt; 2mA\r\n* DeepSleep : &lt; 0.25mA\r\nBye","userUrl":"http://destroyedlolo.info/ESP/","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0012.0002.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408983937,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1510070786505,"deletedAt":0,"userName":"Michael Monteith","firstName":"Michael Monteith","lastName":"","userEmail":null,"comment":"What voltage regulator is on that one?  All the ones using the LM117 run about 10mA all the time.  That's just the regulator.  Not counting the USB chip.   Also is there a jumper to disable the usb chip?    I've seen some newer boards allowing that option.   Whatever.  It's certainly not common.","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0012.0002.0001.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409231138,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1523900124108,"deletedAt":0,"userName":"destroyed lolo","firstName":"destroyed lolo","lastName":"","userEmail":null,"comment":"Hello,\r\n\r\nI did today another test with an ESP-201 (so w/o regulator, USB or anything else).\r\nIn Deep Sleep, I can measure &lt; 0.20 mA and I'm pretty sure it's due to the power LED (red one).\r\nBut I don't want (yet ?) to butcher my ESP to test w/o it :)\r\n\r\nBye\r\n\r\nLaurent","userUrl":"http://destroyedlolo.info","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0012.0002.0001.0001.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408985969,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1510220564659,"deletedAt":0,"userName":"Mike Morrow","firstName":"Mike Morrow","lastName":"","userEmail":null,"comment":"You have made this so simple.  I thought it was some involved process.  Today, I saw a new ESP board that has a battery holder on the other side.  That plus this would be perfect.  Battery operated.  Sleep for 30 seconds, send in a temperature, then sleep for 30 seconds.  Might get a good battery life out of it that way.  Thanks so much.  Going to try this tomorrow.  Doing some midnight reading to see what I want to do tomorrow.  This is number one on the list.  See what I have done, so far, at static28.iliketheinternet.com.  WeMos D1 Mini running the show.  Remote D1 Mini are sending in temperature, BP and RH and that's shown on the web page that the D1 produces.  That's what you would see at static28.  Also a nice SVG of temperature history.  It needs a little work to get the axis tic marks in there.  That's a major overhaul.  One of these days...","userUrl":"www.iliketheinternet.com","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0013.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408986524,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1510260477019,"deletedAt":0,"userName":"Mike Morrow","firstName":"Mike Morrow","lastName":"","userEmail":null,"comment":"I woke up wanting to try this.  With a WeMos D1 Mini Pro, it goes to 30 ma. when sleeping and connected to USB power in the on-board connector.  That's not too bad but far from low enough to run on battery for an extended period.  Will try powering it up via the 3.3v pin and see how that goes.  I surely would like to get to that microamp level that some have mentioned.  I have a remote sensor application that would be nice to run on battery.  Thanks again for the excellent article.","userUrl":"www.iliketheinternet.com","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0014.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":408986537,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1510261610234,"deletedAt":0,"userName":"Mike Morrow","firstName":"Mike Morrow","lastName":"","userEmail":null,"comment":"I did not realize I would be able to test this so quickly or I would have put this in the previous post.\r\n\r\nUsing that same D1 Mini Pro, it runs about 70 ma in full power mode and about 220 microamps in sleep mode.  That's much better.  That is measured by taking 3.3v off of another unit and measuring the power between the units.  Not the 50 microamps quoted on some posts but still quite low.  Maybe with a non-Pro unit, it would be lower but that's all I had with headers on it at the moment.\r\n\r\nAll done here.  Good test.  Good result.  Now to figure out how to power it long term...","userUrl":"www.iliketheinternet.com","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0015.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409001339,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1511565999521,"deletedAt":0,"userName":"Paolo Cinaglia","firstName":"Paolo Cinaglia","lastName":"","userEmail":null,"comment":"Hi to all; can i ask some tutorial for light sleep. I really need it because i not want my project restart from the very beginning after every sleep period. Thanks","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0016.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409004482,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1511877037385,"deletedAt":0,"userName":"Cesar Schneider","firstName":"Cesar Schneider","lastName":"","userEmail":null,"comment":"Did you ever get a measurement of 20uA of power consumption as described on ESP datasheet?","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0017.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409004623,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1511884256523,"deletedAt":0,"userName":"Danny Ackerman","firstName":"Danny Ackerman","lastName":"","userEmail":null,"comment":"I struggled with the low power concept for a very long time, especially because it's so difficult if you want to make life easier and use a board that has a USB chip and a voltage regulator built-in.\r\n\r\nBut I found the answer to all of my problems, for $5: https://www.adafruit.com/product/3435","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0018.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409040869,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1514586005566,"deletedAt":0,"userName":"Joe Q.","firstName":"Joe Q.","lastName":"","userEmail":null,"comment":"This is a good tutorial. For those of you using the NodeMCU dev board, be sure that your script doesn't contain references to the built-in LED -- on this board, that also happens to be connected to GPIO16 / D0, and so calling it will mess up the ability to wake from deep sleep. (Found that out the hard way).","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0019.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409055712,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1515791666477,"deletedAt":0,"userName":"Ben Anderson","firstName":"Ben Anderson","lastName":"","userEmail":null,"comment":"The example code worked well, but for some reason the device is timing out on me after some period of successful operation.  It is difficult to troubleshoot because the time it will function reliably varies from minutes to many hours or even days.  I have tried to include the yield() command to make sure any loops are not causing timeouts.  I have gone to a static IP thinking that maybe the DHCP server was causing delays when assigning an IP.  I cut out all serial output from the code to keep it as clean as possible.  Nothing has seemed to affect the stability of the device.  Is anyone else experiencing problems with the device going into limbo?\r\nI am currently running the example code from this article on two WEMOS D1 Mini Pro devices with a DHT22 shield providing temperature and humidity to the Losant platform.","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0020.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409232559,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1523989483279,"deletedAt":0,"userName":"Estefania Avalos","firstName":"Estefania Avalos","lastName":"","userEmail":null,"comment":"I'm also having problems using this example with DHT22 instead and using LolIn Nodemcu v3. I coded for the dht22 to print temperature go into deep sleep after a certain time prin again. the first reding goes perfect but the second freding brings some garbage along with NaN reading fron the sensor. \r\n\r\nDid you solve it?","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0020.0001.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409056186,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1515849785115,"deletedAt":0,"userName":"Ben Anderson","firstName":"Ben Anderson","lastName":"","userEmail":null,"comment":"Additional details:\r\nI monitored the serial stream and found that it is failing to connect to Losant at this line:\r\n device.connectSecure(wifiClient, LOSANT_ACCESS_KEY, LOSANT_ACCESS_SECRET);\r\nThe while loop that checks for connection is printing endless dots.\r\nMeanwhile, my other device is successfully connecting and reporting data this whole time.  It looks like this error is not relate to the deep sleep function, but more likely the Losant server?","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0021.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409060050,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1516195572660,"deletedAt":0,"userName":"Ben Anderson","firstName":"Ben Anderson","lastName":"","userEmail":null,"comment":"After this comment I tried adding an if statement to put the device into deep sleep if the connection step was taking &gt; 5 seconds.  It has now been running continuously for 4 days.  I believe my problem is solved.","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0021.0001.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409065559,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1516439398502,"deletedAt":0,"userName":"Mike Morrow","firstName":"Mike Morrow","lastName":"","userEmail":null,"comment":"I got one of the ESP32 units with a battery connector on the back ( https://www.ebay.com/itm/ESP32-WEMOS-Development-Board-WiFi-Bluetooth-Battery-New/282669747975?ssPageName=STRK%3AMEBIDX%3AIT&amp;_trksid=p2057872.m2749.l2649 ).  I put in a fake battery (18650 rated at an impossible 9800 mah) and it runs overnight but not more than that on a fully charged battery. Cheap and almost useless except for a quick test.\r\n\r\nThe unit does not need the additional jumper to wake up from sleep. I have not tried WiFi on it yet.  Tomorrow.  I just flash the builtin LED (pin 16) for 1ms each 30 seconds.  It works well with that simple task.  Current draw requirement testing tomorrow.  For now, using the backpack battery.","userUrl":"ILikeTheInternet.com","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0022.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409065829,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1516473703650,"deletedAt":0,"userName":"Dunn Le","firstName":"Dunn Le","lastName":"","userEmail":null,"comment":"Hi Ben, \r\nCan you please explain: how does (an if statement to put the device into deep sleep if the connection step was taking &gt; 5 seconds) that resolve the timeout problem (device disconnected)?\r\nThanks!\r\nDunn","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0023.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409081431,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1517722074173,"deletedAt":0,"userName":"Shawn M","firstName":"Shawn M","lastName":"","userEmail":null,"comment":"**Noob here**\r\nI've been running some tests with deep sleep, and noticed that 3v3 and Vin still put out power in deep sleep. Is this true (I've looked around and am having trouble finding the answer)? And with your setup, power is constantly going through your temperature sensor?\r\n\r\nI ask because I'm using a soil moisture sensor, which tends to corrode quickly with constant power going through it. Also, it seems to work best with 5V. I may need to use a relay, or some other trick. \r\n\r\nThank you!","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0024.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409084738,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1517978328025,"deletedAt":0,"userName":"Ansuz Inspirati","firstName":"Ansuz Inspirati","lastName":"","userEmail":null,"comment":"Hi Shawn, I'd like to personal message you regarding your project. Do you have a contact address which you are comfortable posting to this forum?","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0024.0001.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409085057,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1518006017045,"deletedAt":0,"userName":"Rudy C","firstName":"Rudy C","lastName":"","userEmail":null,"comment":"SHAWN, do you find a solution for that? I try the same with another sensor in 5V and i'm really interested to know how i can cut the power to the sensor during the deep sleep period.\r\nThanks in advance","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0024.0002.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409085717,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1518043194750,"deletedAt":0,"userName":"Shawn M","firstName":"Shawn M","lastName":"","userEmail":null,"comment":"Not in regards to the boards power outputs in Deep Sleep. \r\n\r\nI've considered several ways of overcoming it, but I'm not sure which is the best option to keep power usage to a minimum. All of them require the use of a GPIO pin. \r\n\r\n1. Use a boost convertor to step-up a GPIO pin output to 5v (which can be turned off when going to sleep)\r\n2. Using a transistor as a switch to turn on and off the 5V to the sensors.\r\n3. Using a MOSFET instead of a transistor.\r\n4. Getting new sensors.\r\n\r\nI've been trying to make the transistor work because it's the cheapest and I have a few on hand, but it has been a bit difficult because the literature available on how to use a transistor confuses me. When I get home tonight I'll try it again.","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0024.0002.0001.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409085739,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1518044177159,"deletedAt":0,"userName":"MIchael Monteith","firstName":"MIchael Monteith","lastName":"","userEmail":null,"comment":"Shawn,\r\n Take a look at this:\r\nhttp://www.rollanet.org/~n0klu/Ham_Radio/%28ebook%29%20Radio%20Shack%20-%20Mini-Notebook%20-%20Formulas%20Tables%20Basic%20Circuits%20.pdf\r\n\r\nThis was one of the first books I bought as a teen from Radio Shack.  Lots of great notes.  Including a transistor circuit.  \r\n\r\nThese might help too:\r\nhttps://www.youtube.com/watch?v=HqhE-8xXeCQ\r\nThey have some other videos\r\nhttps://www.youtube.com/channel/UCiLgdNKZCiod7k5nsrUkOJA\r\n\r\nMichael","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0024.0002.0001.0001.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409084737,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1517978261513,"deletedAt":0,"userName":"Ansuz Inspirati","firstName":"Ansuz Inspirati","lastName":"","userEmail":null,"comment":"Hi Shawn, I'd like to personal message you regarding your project. Do you have a contact address which you are comfortable posting to this forum?","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0025.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409150076,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1519418553854,"deletedAt":0,"userName":"Acca rien","firstName":"Acca rien","lastName":"","userEmail":null,"comment":"Hello,\r\nI'm using an ESP8266 nodemcu 1.0 powered with a 3.7 battery charged by a solar panel and charging module.\r\n\r\nEverything works well and my setup can last 2-3 days without charging.\r\n\r\nMy problem is that if the battery voltage falls under a certain value, the ESP doesn't wake up, even after full solar charge of battery.\r\nI have to disconnect D0 from reset and to reset it manually in order to make it sleep (reset) or to unplug and replug the battery.\r\nSince i'd like to put the electronic in a 3d printed box sealed with the solar panel, it is not very convenient.\r\n\r\nDo you have any advice to allow it to restart by itself ?\r\nSorry for my poor english","userUrl":"none","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0026.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409178850,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1520588472973,"deletedAt":0,"userName":"Marcus","firstName":"Marcus","lastName":"","userEmail":null,"comment":"Hi Acca,\r\n\r\nJust wondering what solar panel and charging module you are using?\r\n\r\nDo you have a link?\r\n\r\nThanks","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0026.0001.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409230719,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1523876791703,"deletedAt":0,"userName":"Acca","firstName":"Acca","lastName":"","userEmail":null,"comment":"MARCUS, i use those components :\r\nhttps://fr.aliexpress.com/item/TP4056-5V-TENSTAR-ROBOT-1A-Micro-USB-18650-Lithium-Battery-Charging-Board-Charger-Module-Protection/32818008660.html?spm=a2g0s.9042311.0.0.4q22u7\r\nhttps://fr.aliexpress.com/item/Solar-Panel-Module-for-Light-Battery-Cell-Phone-Charger-Portable-6V-2W-330MA-DIY/32408341015.html?spm=a2g0s.9042311.0.0.4q22u7","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0026.0001.0001.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409172756,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1520175720622,"deletedAt":0,"userName":"Luiz Almeida JÃºnior","firstName":"Luiz Almeida JÃºnior","lastName":"","userEmail":null,"comment":"Hii!\r\nHow do I get sleep mode via software?\r\n\r\n#Android","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0027.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409173848,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1520268331796,"deletedAt":0,"userName":"Ayoub Elmouddene","firstName":"Ayoub Elmouddene","lastName":"","userEmail":null,"comment":"Hi guys, deep sleep does not work for me. The code executed normaly until it comes to the deep sleep instruction. In fact I printed something just before the deep sleep instruction so I can see what happens in the serial monitor, and I found that the ESP sleeps but never wakes up, and some random caracters shows in the serial monitor and the code never repeats itself again. I am really stuck here if anyone could help me I will be thankful.\r\n\r\n\r\nhere is my code in case you want to take a look on it:\r\n\r\n#include \r\n#include \r\n//#include \r\nstatic uint32_t minutes=0;\r\nint rtcValue=0;\r\n//Def\r\n#define myPeriodic 4 //in sec | Thingspeak pub is 15sec\r\n#define ONE_WIRE_BUS 2  // DS18B20 on arduino pin2 corresponds to D4 on physical board\r\n//#define mySSR 0  // Solid State Relay on pin 0\r\nfloat prevTemp = 0;\r\nconst char* server = \"api.thingspeak.com\";\r\n//String apiKey =\"RJD8Y6OVCHEU5578\"; First thingspeak channel\r\nString apiKey =\"9Q62GZYMZOAHPJUW\"; //second channel\r\nconst char* MY_SSID = \"ENOVA-GUEST\"; \r\nconst char* MY_PWD = \"ENOVA-GUEST\";\r\nint sent = 0;\r\nvoid connectWifi()\r\n{\r\n  Serial.print(\"Connecting to \"+*MY_SSID);\r\n  WiFi.begin(MY_SSID, MY_PWD);\r\n  while (WiFi.status() != WL_CONNECTED) {\r\n  delay(1000);\r\n  Serial.print(\".\");\r\n  }\r\n  \r\n  Serial.println(\"\");\r\n  Serial.println(\"Connected\");\r\n  Serial.println(\"\");  \r\n}\r\n//OneWire oneWire(ONE_WIRE_BUS);\r\n//DallasTemperature DS18B20(&amp;oneWire);\r\nvoid sendNumber(int inc)\r\n{  \r\n   inc=random(10,50);\r\n   WiFiClient client;\r\n  \r\n   if (client.connect(server, 80)) { // use ip 184.106.153.149 or api.thingspeak.com\r\n   Serial.println(\"WiFi Client connected \");\r\n   \r\n   String postStr = apiKey;\r\n   postStr += \"&amp;field1=\";\r\n   postStr += String(inc);\r\n   postStr += \"\\r\\n\\r\\n\";\r\n   \r\n   client.print(\"POST /update HTTP/1.1\\n\");\r\n   client.print(\"Host: api.thingspeak.com\\n\");\r\n   client.print(\"Connection: close\\n\");\r\n   client.print(\"X-THINGSPEAKAPIKEY: \" + apiKey + \"\\n\");\r\n   client.print(\"Content-Type: application/x-www-form-urlencoded\\n\");\r\n   client.print(\"Content-Length: \");\r\n   client.print(postStr.length());\r\n   client.print(\"\\n\\n\");\r\n   client.print(postStr);\r\n   delay(1000);\r\n   \r\n   }//end if\r\n   sent++;\r\n client.stop();\r\n}\r\nvoid setup() {\r\n  Serial.begin(115200);\r\n  //connectWifi();\r\n  \r\n}\r\n\r\nvoid loop() { \r\n  int i=0;\r\n  //Serial.print(String(sent)+\" Temperature: \");\r\n  Serial.println(\"Test ESP\");\r\n  Serial.print(i);\r\n  Serial.print(\"\\n\");\r\n  i++;\r\n  //sendNumber(rtcValue);\r\n  Serial.println(\"I'm awake.\");\r\n  delay(1000);\r\n  Serial.println(\"Going into deep sleep for 10 seconds\");\r\n  //ESP.rtcUserMemoryWrite(0, &amp;minutes, sizeof(minutes));\r\n  ESP.deepSleep(10000000,WAKE_RF_DEFAULT);\r\n  //delay(1000);\r\n  //ESP.rtcUserMemoryRead(0, &amp;rtcValue, sizeof(rtcValue));\r\n  //rtcValue+=0.333;\r\n}\r\n\r\n//end connect","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0028.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409219610,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1523216356563,"deletedAt":0,"userName":"Marcel StÃ¶r","firstName":"Marcel StÃ¶r","lastName":"","userEmail":null,"comment":"A very nice tutorial, well done. I'd like to point out two things, though.\r\n\r\na) This was written in March 2017. Now, a year later, the statement \"According to the ESP8266 SDK, you can only sleep for 4,294,967,295 Âµs, which is about ~71 minutes.\" is no longer true. With ESP8266-Arduino 2.4.1+ you have access to optimized Espressif SDK functions that were introduced in SDK 2.1. Arduino offers `ESP.deepSleepMax()` (https://github.com/esp8266/Arduino/blob/master/cores/esp8266/Esp.cpp#L119) to determine the max value you can pass to `ESP.deepSleep`. You now get roughly 3.5h of deep sleep at a time. However, as this is based on the RTC and since the RTC clock period tends to drift with changes in temperature this varies a bit.\r\nSee https://github.com/esp8266/Arduino/pull/4234 and https://www.espressif.com/sites/default/files/documentation/2c-esp8266_non_os_sdk_api_reference_en.pdf#page=28 (3.3.9. `system_deep_sleep`) for details.\r\n\r\nb) I don't want to spoil the party but before you get all excited about potential energy savings consider this. Energy consumption during WiFi activity is orders of magnitude higher than during deep sleep. Whether deep sleep consumption is 20Âµs or 200Âµs really doesn't matter. For overall consumption pretty much the only thing that matters is how long the modem is on (i.e. WiFi activity). So, if you can afford to double the deep sleep interval of your system you get roughly twice the uptime on a single charge.\r\nWe were able to document this at https://thingpulse.com/2018/02/25/esp8266-monitoring-power-consumption/. It also links to a follow-up article about measures/tricks to reduce overall consumption.","userUrl":"https://thingpulse.com","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0029.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409235078,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1524162278272,"deletedAt":0,"userName":"Alexandre Verri","firstName":"Alexandre Verri","lastName":"","userEmail":null,"comment":"Have you measured the current during the deep sleep? The values you have mentioned are for the ESP8266 only. With the board that you have used it's very unlikely to have 20uA of consumption during deep sleep because the CP2101  and other board circuitry consumes one digit mA.","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0030.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409260037,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1525077590536,"deletedAt":0,"userName":"Lisergio","firstName":"Lisergio","lastName":"","userEmail":null,"comment":"its possible use the deep sleep mode, to read the change of the switch state? its to make a remote to turn on/off a light.\r\n\r\nthanks...","userUrl":"http://lisergio.wordpress.com","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0031.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null},{"id":409267450,"portalId":0,"contentId":0,"contentTitle":"","contentPermalink":null,"collectionId":0,"createdAt":1525532710413,"deletedAt":0,"userName":"Sushant Naik","firstName":"Sushant Naik","lastName":"","userEmail":null,"comment":"Hi, Losant,\r\nThank you for your Posting this is helpful.\r\n\r\nhowever, I would like to know how to implement Light or modem Sleep mode?\r\n\r\nSushant","userUrl":"","state":"APPROVED","userIp":null,"userReferrer":null,"userAgent":null,"contentAuthorEmail":null,"contentAuthorName":null,"contentCreatedAt":0,"threadId":"0032.0000.0000.0000.0000.0000.0000.0000.0000.0000","replyingTo":null,"parentId":0,"legacyId":0,"extraContext":null,"parent":null}],"total":59,"limit":1000,"offset":0})