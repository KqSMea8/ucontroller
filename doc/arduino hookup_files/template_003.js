(function(){
Template.__checkName("build_battery");
Template["build_battery"] = new Template("Template.build_battery", (function() {
  var view = this;
  return HTML.DIV({
    "class": "col-md-12"
  }, HTML.Raw("\n		<h1>Battery Powered Sensors</h1>\n		"), HTML.DIV({
    "class": "well"
  }, "\n\n		", HTML.Raw("<h2>General Tips for Battery Operation</h2>"), "\n\n		 ", HTML.Raw('<a href="/battery/ProMiniMod.png" data-lightbox="image-finding" title="Modification of the Pro Mini - clone"><img src="/battery/ProMiniMod.png" style="width:20%;float:right;padding-left:20px"></a>'), "\n		", HTML.Raw("<p>The following tips will reduce the power consumption of your Arduino Sensor allowing it to run on batteries for a longer period of time.	</p>"), "\n		", HTML.Raw("<p>Note: When programming using FTDI adapter on modified 3v3 Pro Minis with removed regulators. Make sure to supply a stable 3v3 power source to the VCC pin yourself.</p>"), "\n		", HTML.Raw('<ol>\n			<li>Use the 3.3V version Arduino Pro Mini with the lower CPU clock speed (8MHz)</li>\n			<li>Sleep whenever possible by powering down the Arduino and radio. The sensor node can periodically wake up by either triggering a timer interrupt or by an attached sensor registering a reading on one of the Arduino interrupt enabled io-pins. Most of the MySensors example sketches implement sleep mode.<br>\n			When powered down, the CPU, DS18B20 temp sensor and radio consume (very roughly) 120 uA - which is similar to the self discharge rate of a battery.\n\n\n			</li>\n\n			<li>Disconnect the Arduino\'s power indicator LED by cutting the track between the LED and the resistor in series.  <i>Saves about 1.5 mA</i>\n			<a href="/battery/ProMiniMod2.png" data-lightbox="image-finding" title="Modification of the Pro Mini - version 2"><img src="/battery/ProMiniMod2.png" style="width:30%;float:right;padding-left:20px"></a>>\n			<!-- a href="/battery/cut.png" data-lightbox="image-finding" title="Diconnect LEDs and Regulator - sparkfun"><img src="/battery/cut.png" style="width:40%;float:right;padding-left:20px"></a -->\n\n			</li>\n			<li>Disconnect the 3.3 VDC regulator because it is not needed. Cut the V<sub>out</sub> pin with a sharp fine wire cutter. See images to the right on how to locate regulator. <i>Saves about 220 uA.</i></li>\n\n			<li>Power the device with two AA batteries connected in series to the PCB.  You can power 5 VDC sensors using an ultra low power step up converter (see the Buying Guide below). Power regulators will reduce the battery life due constant power consumption.\n			</li>\n		</ol>'), "\n\n		", HTML.Raw("<h2>Theoretical Battery Life</h2>"), "\n\n		", HTML.Raw("<p>The battery life (for a hypothetical temperature sensor) can be calculated by determining the average current for the circuit, using the following general equation:</p>"), "\n\n		", HTML.Raw("<p>I<sub>avg</sub> = (t<sub>0</sub>*I<sub>0</sub> + t<sub>1</sub>*I<sub>1</sub> ... + t<sub>x</sub>*I<sub>x</sub>) / (t<sub>0</sub> + t<sub>1</sub> ... + t<sub>x</sub>)</p>"), "\n\n		", HTML.Raw("<p>Note these figures are <strong>for illustration purposes</strong> - your results will certainly vary. Current is measured at the battery with a battery Voltage of 3.0V.</p>"), "\n\n		", HTML.Raw("<p><strong>Idling</strong>:  I<sub>0</sub> = 28 mA, t<sub>0</sub> = 0.65 sec (using the delays I set up in the sketch)\n		<strong>Transmitting</strong>:  I<sub>1</sub> = 31 mA, t<sub>1</sub> = say 50 mSec (time is just a guess)<br>\n		<strong>Sleeping</strong>:  I<sub>2</sub> = 120 uA (very roughly), t<sub>2</sub> = 15 minutes (the temperature sampling rate)</p>"), "\n\n		", HTML.Raw("<p>Using the above figures the effective current = 0.142 mA.  The sleep current is difficult to measure accurately, so this figure may vary and will affect the lifetime calculation.</p>"), "\n\n		", HTML.Raw("<p>Assume the batteries are good for 2000 mAhr, that gives a lifetime of 14,101 hours, which equals to <strong>19.6 months</strong>. The lifetime is dominated by the sleep current and sensor sample rate. Assuming the figures and calculations are correct (let us know if they aren't), it's likely the batteries would die from old age rather than through actual usage.</p>"), "\n\n		", HTML.Raw("<h2>Measuring and Reporting Battery Level</h2>"), "\n		", HTML.Raw('<a href="/battery/volts.png" data-lightbox="image-finding" title="Modification of the Pro Mini - version 2"><img src="/battery/volts.png" style="width:30%;float:right;padding-left:20px"></a>'), "\n		", HTML.Raw("<p>Use a 1M&#8486; (R1) and 470K&#8486; (R2) resistor in series, connected to the positive terminal on the battery and ground and then connected the tap point to the A0 input on the CPU. </p>"), "\n\n		", HTML.Raw("<p>The tap point could be bypassed with a 0.1 uF capacitor to keep the noise level low, at this otherwise high impedance point. </p>"), "\n		", HTML.Raw("<p>The ADC is set to use the internal reference value of 1.1V - so V<sub>max</sub> at ADC<sub>max</sub> = 1.1*(1<sup>6</sup>+470<sup>3</sup>)/470<sup>3</sup> = 3.44V</p>"), "\n		", HTML.Raw("<p>The battery power value must be converted to a percentage compatable with your Controller.</p>"), "\n\n		", HTML.Raw("<p>See the following example on how to measure battery level on A0 and report it to the Controller.</p>"), "\n		", HTML.P(Blaze._TemplateWith(function() {
    return {
      repo: Spacebars.call("Arduino"),
      path: Spacebars.call("libraries/MySensors/examples/BatteryPoweredSensor"),
      name: Spacebars.call("BatteryPoweredSensor.ino")
    };
  }, function() {
    return Spacebars.include(view.lookupTemplate("dl"));
  })), "\n\n\n		", HTML.Raw("<h2>Need to Know More?</h2>"), "\n		", HTML.Raw("<p>Here are links to some articles for a more in-depth information:</p>"), HTML.Raw('<a href="http://forum.micasaverde.com/index.php/topic,20078.0.html">A-lurker excellent post about this topic on the micasaverde forum</a>'), HTML.Raw("<br>"), "\n		", HTML.Raw('<a href="http://maniacbug.wordpress.com/2011/10/19/sensor-node/">Maniacbugs Low-Power Wireless Sensor Node</a>'), HTML.Raw("<br>"), "\n		", HTML.Raw('<a href="http://www.gammon.com.au/forum/?id=11497">Power saving techniques for microprocessors</a>'), HTML.Raw("<br>"), "\n		", HTML.Raw('<a href="http://hwstartup.wordpress.com/2013/04/15/how-to-run-an-arduino-clone-on-aa-batteries-for-over-a-year-part-2/">Running Arduino for over a year on batteries</a>'), HTML.Raw("<br>"), "\n		​", HTML.Raw('<a href="http://www.thalin.se/2013/04/arduino-pro-mini-low-power-modification.html">Pro mini modification for low power consuption</a>'), HTML.Raw("<br>"), "\n		​", HTML.Raw('<a href="http://www.rocketscream.com/blog/2011/07/04/lightweight-low-power-arduino-library/">Low power library for Arduino</a>'), "\n\n			", HTML.Raw("<h2>Buying Guide</h2>"), "\n			", Blaze._TemplateWith(function() {
    return {
      category: Spacebars.call("s_battery")
    };
  }, function() {
    return Spacebars.include(view.lookupTemplate("shop"));
  }), "\n		"), "\n	");
}));

}).call(this);
